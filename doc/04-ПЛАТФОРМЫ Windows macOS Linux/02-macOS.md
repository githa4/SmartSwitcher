# 02-macOS (–∫–∞—Ä–∫–∞—Å)

–°—Ç–∞—Ç—É—Å: üìã –û–∂–∏–¥–∞–µ—Ç
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: ‚≠ê –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ

---

## –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∞–≤–æ–∫

| –î–∞—Ç–∞ | –í—Ä–µ–º—è | –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ |
|------|-------|-------------|
| 2025-12-18 | 00:00 | –°–æ–∑–¥–∞–Ω –∫–∞—Ä–∫–∞—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞ |

---

## –°—É—Ç—å

macOS 12+ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ –∫–∞—Ä–∫–∞—Å –ø–æ—Å–ª–µ MVP: —Å–±–æ—Ä–∫–∞, –∑–∞–ø—É—Å–∫, best-effort hook.

–¶–µ–ª—å: –ø–æ–¥–∫–ª—é—á–∏—Ç—å macOS –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–¥—É–ª–µ–π ‚Äî —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π –±—ç–∫–µ–Ω–¥.

–ö–æ–Ω—Ç—Ä–∞–∫—Ç (—Ç–µ–∫—É—â–∏–π Platform API, —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ `smart_switcher_platform`):
- `start_keyboard_hook()` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è MVP; –º–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å —Å —Ä—É—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π)
- `switch_to_next_layout(forbidden_contexts)`
- `get_active_lang_id()`
- `set_layout_by_lang_id(forbidden_contexts, lang_id)`
- `send_backspaces(forbidden_contexts, count)`
- `send_unicode_text(forbidden_contexts, text)`
- `is_forbidden_context(forbidden_contexts)`

---

## –ü–µ—Ä–µ—Ö–≤–∞—Ç

- `CGEventTap`

---

## –†–∞–∑—Ä–µ—à–µ–Ω–∏—è

- Accessibility / Input Monitoring (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è).
- –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –º–æ–¥—É–ª—å –¥–æ–ª–∂–µ–Ω –æ—Ç–∫–ª—é—á–∞—Ç—å—Å—è –∏–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ.

---

## Secure input

- Best-effort –¥–µ—Ç–µ–∫—Ç ‚Äú–∑–∞—â–∏—â—ë–Ω–Ω–æ–≥–æ –≤–≤–æ–¥–∞‚Äù.
- Fail-closed.

---

## –°–≤—è–∑–∞–Ω–æ

- [06-–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å/02-FAIL-CLOSED –ü–û–õ–ò–¢–ò–ö–ê.md](../06-%D0%91%D0%95%D0%97%D0%9E%D0%9F%D0%90%D0%A1%D0%9D%D0%9E%D0%A1%D0%A2%D0%AC%20%D0%BF%D1%80%D0%B8%D0%B2%D0%B0%D1%82%D0%BD%D0%BE%D1%81%D1%82%D1%8C/02-FAIL-CLOSED%20%D0%9F%D0%9E%D0%9B%D0%98%D0%A2%D0%98%D0%9A%D0%90.md)
