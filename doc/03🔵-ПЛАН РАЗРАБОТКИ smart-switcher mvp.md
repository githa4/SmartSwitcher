# 03-–ü–õ–ê–ù –†–ê–ó–†–ê–ë–û–¢–ö–ò SmartSwitcher MVP

–°—Ç–∞—Ç—É—Å: üöß –í —Ä–∞–±–æ—Ç–µ  
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî• –ö—Ä–∏—Ç–∏—á–Ω–æ

---

## –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∞–≤–æ–∫

| –î–∞—Ç–∞ | –í—Ä–µ–º—è | –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ |
|------|-------|-------------|
| 17.12.2025 | 00:00 | –°–æ–∑–¥–∞–Ω –ø–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ MVP + —É—Ç–æ—á–Ω–µ–Ω —Ç–µ—Ö—Å—Ç–µ–∫ |
| 17.12.2025 | 00:00 | –£—á—Ç–µ–Ω—ã –±—É–¥—É—â–∏–µ –º–æ–¥—É–ª–∏ (–±—É—Ñ–µ—Ä/–≥–æ–ª–æ—Å/AI) –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è MVP |
| 18.12.2025 | 02:30 | –†–∞—Å—à–∏—Ä–µ–Ω –ø–ª–∞–Ω: –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–Ω–æ–µ –¢–ó, —Å—É—Ç—å –ø—Ä–æ–µ–∫—Ç–∞, –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å, –∫—Ä–∏—Ç–µ—Ä–∏–∏ |

---

## –°—É—Ç—å –ø—Ä–æ–µ–∫—Ç–∞

**SmartSwitcher** ‚Äî –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–∞—Å–∫–ª–∞–¥–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å –æ—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏–µ–π –∏ –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π.

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ MVP

–°–æ–∑–¥–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –∂–∏–∑–Ω–µ—Å–ø–æ—Å–æ–±–Ω–æ–µ, —Å–≤–µ—Ä—Ö–±—ã—Å—Ç—Ä–æ–µ, —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏ —Ä—É—á–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–∞—Å–∫–ª–∞–¥–∫–∏** (—Ä—É—Å—Å–∫–∏–π ‚Üî –∞–Ω–≥–ª–∏–π—Å–∫–∏–π)
   - Auto-detect –ø–æ 2‚Äì3 —Å–∏–º–≤–æ–ª–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ghbdnet` ‚Üí —Ä—É—Å—Å–∫–∏–π)
   - –†—É—á–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–æ Alt+Shift

2. **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏–∏** –Ω–∞ –ª–µ—Ç—É
   - –ß–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–µ–µ API (LanguageTool / Yandex.Speller)
   - –° –ª–æ–∫–∞–ª—å–Ω—ã–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º —á–∞—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º—ã—Ö —Å–ª–æ–≤
   - **Opt-in** (–æ—Ç–∫–ª—é—á–µ–Ω–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - –¢—Ä–∏–≥–≥–µ—Ä: –ø–æ—Å–ª–µ Enter –∏–ª–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤–≤–æ–¥–∞

3. **–ó–∞—â–∏—Ç—ã –æ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö**
   - –ü–æ–ª—è –ø–∞—Ä–æ–ª–µ–π, —Ç–µ—Ä–º–∏–Ω–∞–ª—ã, –º–µ–Ω–µ–¥–∂–µ—Ä—ã –ø–∞—Ä–æ–ª–µ–π (KeePass, 1Password –∏ —Ç.–¥.)
   - –ü–æ–ª–∏—Ç–∏–∫–∞ **fail-closed**: –µ—Å–ª–∏ —Å–æ–º–Ω–µ–≤–∞–µ–º—Å—è ‚Äî –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º

### –ù–µ –≤—Ö–æ–¥–∏—Ç –≤ MVP (–Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç)

- GUI (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥ + –ø–æ—Ç–æ–º —Å–∏—Å—Ç–µ–º–Ω—ã–π —Ç—Ä–µ–π)
- –£–º–Ω—ã–π –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞ (clipboard history, —Ç–µ–≥–∏)
- –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ (Whisper.cpp –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
- –ò–ò-–∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏

### –ö–ª—é—á–µ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

#### 1) –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç ‚Ññ1)

- **–ó–∞–¥–µ—Ä–∂–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞–∂–∞—Ç–∏—è** ‚â§ 1 –º—Å
- **–ù–µ—Ç –ª–∞–≥–æ–≤, –∑–∞–≤–∏—Å–∞–Ω–∏–π, –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤** —Å –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏
- **–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏** ‚â§ 20 –ú–ë
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å 24+ —á–∞—Å–∞** –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –≤ —Ñ–æ–Ω–µ

#### 2) –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

- **–ù–∏–∫–∞–∫–æ–π —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏**
- **–ù–µ—Ç —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤** –ø—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–π –æ—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏–∏ (spell_checker disabled –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **–ü–æ–ª–Ω–∞—è –æ—Ñ–ª–∞–π–Ω-—Ä–∞–±–æ—Ç–∞** –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- **Fail-closed –≤ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö**: –ø–∞—Ä–æ–ª–∏/—Ç–µ—Ä–º–∏–Ω–∞–ª—ã ‚Üí –º–æ–¥—É–ª–∏ –æ—Ç–∫–ª—é—á–∞—é—Ç—Å—è
- **No data leakage**: —Ç–µ–∫—Å—Ç –∏–∑ –ø–æ–ª–µ–π –ø–∞—Ä–æ–ª–µ–π –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ —Å–µ—Ç—å

#### 3) –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- –ö–∞–∂–¥—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª ‚Äî –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –º–æ–¥—É–ª—å (—Årate)
- –ú–æ–¥—É–ª–∏ –≤–∫–ª—é—á–∞—é—Ç—Å—è/–≤—ã–∫–ª—é—á–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `config.toml`
- –ú–æ–¥—É–ª–∏ –Ω–µ –∑–∞–≤–∏—Å—è—Ç –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞ (–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ event bus)
- –Ø–¥—Ä–æ –Ω–µ –∑–Ω–∞–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –º–æ–¥—É–ª–µ–π ‚Äî —Ç–æ–ª—å–∫–æ trait + —Å–æ–±—ã—Ç–∏—è
- –ù–æ–≤—ã–µ –º–æ–¥—É–ª–∏ (clipboard/voice/AI) –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —è–¥—Ä–∞

#### 4) –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å

- **Windows 10/11**: ‚úÖ MVP baseline
- **macOS 12+**: ‚ö†Ô∏è base support (Accessibility API)
- **Linux (X11)**: ‚ö†Ô∏è base support
- **Wayland**: üìã best-effort, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π

#### 5) –†–∞–±–æ—Ç–∞ –≤ —Ñ–æ–Ω–µ

- –ù–µ—Ç GUI –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (Tauri-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–æ—Å–ª–µ MVP)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –∫–æ–Ω—Ñ–∏–≥ `config.toml`
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: –≤ —Ñ–∞–π–ª + –∫–æ–Ω—Å–æ–ª—å (—É—Ä–æ–≤–µ–Ω—å `info` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

### üöß –í —Ä–∞–±–æ—Ç–µ

- –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ MVP (Windows first)
- –£—Ç–æ—á–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ "–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤ –ø–∞—Ä–æ–ª—è—Ö/—Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö" (fail-closed)
- –ù–∞—á–∞—Ç—å –≠—Ç–∞–ø 0 (Cargo workspace)

### ‚è≥ –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è

- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —è–¥—Ä–∞ + —Å–æ–±—ã—Ç–∏–π–Ω–æ–π —à–∏–Ω—ã
- –ú–æ–¥—É–ª—å `layout_switcher` (–∞–≤—Ç–æ + Alt+Shift)
- –ú–æ–¥—É–ª—å `spell_checker` (–ø–æ Enter, opt-in —Å–µ—Ç—å)
- –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–µ –±—ç–∫–µ–Ω–¥—ã (Windows/macOS/X11)
- –ó–∞–∫–ª–∞–¥–∫–∞ –ø–ª–∞–≥–∏–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø–æ–¥ –±—É–¥—É—â–∏–µ –º–æ–¥—É–ª–∏ (clipboard/voice/ai)

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

~~–°–æ–∑–¥–∞–Ω –¥–æ–∫—É–º–µ–Ω—Ç –ø–ª–∞–Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏~~
~~–û–±–Ω–æ–≤–ª–µ–Ω –ø–ª–∞–Ω —Å –ø–æ–ª–Ω—ã–º –¢–ó –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π~~

---

## 1) –¢–µ—Ö—Å—Ç–µ–∫ (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–ª—è MVP)

### 1.1 –Ø–∑—ã–∫ –∏ —Ä–∞–Ω—Ç–∞–π–º

- Rust (stable)
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å: `tokio` (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á)
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: –º–æ–¥—É–ª—å–Ω–∞—è, event-driven

–ö–ª—é—á–µ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è ‚â§ 1 –º—Å:
- Callback —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Ö—É–∫–∞ –ù–ï –¥–µ–ª–∞–µ—Ç —Ç—è–∂—ë–ª–æ–π —Ä–∞–±–æ—Ç—ã.
- Callback —Ç–æ–ª—å–∫–æ (–∞) –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ –∏ (–±) –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤
  –æ—á–µ—Ä–µ–¥—å/–∫–∞–Ω–∞–ª.

### 1.2 –ú–µ–∂–º–æ–¥—É–ª—å–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ

- Event bus: `tokio::sync::broadcast` (1‚ÜíN —Å–æ–±—ã—Ç–∏—è)
- –ö–æ–º–∞–Ω–¥—ã/–∑–∞–ø—Ä–æ—Å—ã: `tokio::sync::mpsc` (N‚Üí1 –æ—á–µ—Ä–µ–¥–∏)

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:
- –î–ª—è —Å–∞–º—ã—Ö "–≥–æ—Ä—è—á–∏—Ö" –ø—É—Ç–µ–π –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ + lock-free –æ—á–µ—Ä–µ–¥—å,
  –µ—Å–ª–∏ –∫–∞–Ω–∞–ª—ã –¥–∞–¥—É—Ç –∑–∞–º–µ—Ç–Ω—É—é —Ü–µ–Ω—É.

### 1.3 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- TOML: `toml`
- –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è: `serde`

### 1.4 –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- `tracing`
- –£—Ä–æ–≤–µ–Ω—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `info`
- `debug` ‚Äî —Ç–æ–ª—å–∫–æ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥/ENV

### 1.5 –û—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏—è

- Online (opt-in): LanguageTool Public API / self-hosted
- –ö—ç—à: in-memory LRU –¥–ª—è MVP; SQLite ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏

–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
- `spell_checker` –≤—ã–∫–ª—é—á–µ–Ω –≤ –∫–æ–Ω—Ñ–∏–≥–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
- –ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç —Ç–µ–∫—É—â–µ–≥–æ "–∫–æ–º–º–∏—Ç–∞" (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ
  Enter), –±–µ–∑ "—Å—Ç—Ä–∏–º–∏–Ω–≥–∞" –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞.

### 1.6 –°–µ—Ç—å (—Ç–æ–ª—å–∫–æ –¥–ª—è `spell_checker`)

- HTTP –∫–ª–∏–µ–Ω—Ç: `reqwest` (async)
- TLS: `rustls` (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ; –±–µ–∑ OpenSSL-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)

–ü—Ä–∞–≤–∏–ª–æ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏:
- –ü—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–º `spell_checker` ‚Äî –ù–ï–¢ —Å–µ—Ç–µ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤–æ–æ–±—â–µ.

### 1.7 –•—Ä–∞–Ω–∏–ª–∏—â–µ/–∫—ç—à

- In-memory LRU: `lru` (MVP)
- –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (–ø–æ—Å–ª–µ MVP): SQLite (—á–µ—Ä–µ–∑ `rusqlite` –∏–ª–∏ `sqlx`) ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

---

## 2) –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ö—É–∫–∏ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤–≤–æ–¥–∞ (–ø–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º)

### 2.1 Windows 10/11 (MVP baseline)

- –ü–µ—Ä–µ—Ö–≤–∞—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã: `SetWindowsHookExW(WH_KEYBOARD_LL)`
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–∫–Ω–∞: `GetForegroundWindow` + `GetWindowTextW`
- –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞: `GetWindowThreadProcessId` + `OpenProcess`
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞—Å–∫–ª–∞–¥–∫–∏: WinAPI (—É—á–µ—Å—Ç—å per-thread/per-window –Ω—é–∞–Ω—Å—ã)

–ó–∞–ø—Ä–µ—Ç –≤ –ø–∞—Ä–æ–ª—è—Ö/—Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö (MVP):
- –ë–ª–æ–∫-–ª–∏—Å—Ç –ø–æ process/window title: `cmd`, `WindowsTerminal`, `PowerShell`,
  `ConEmu`, `KeePass`, –∏ —Ç.–ø.
- –ü–æ–ª–∏—Ç–∏–∫–∞ fail-closed: –µ—Å–ª–∏ –Ω–µ —É–≤–µ—Ä–µ–Ω—ã –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ ‚Äî –ù–ï –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º.

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ "—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞" –ù–ï –¥–µ–ª–∞—Ç—å –Ω–∞ –∫–∞–∂–¥–æ–º key event.
- –î–µ–ª–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ —Å–º–µ–Ω–µ —Ñ–æ–∫—É—Å–∞/–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–∫–Ω–∞ –∏ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  (–Ω–∞–ø—Ä–∏–º–µ—Ä, `HWND -> is_sensitive`). –í hook callback ‚Äî —Ç–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä—ã–π read –∫—ç—à–∞.

### 2.2 macOS 12+

- –ü–µ—Ä–µ—Ö–≤–∞—Ç: `CGEventTap`
- –ö–æ–Ω—Ç–µ–∫—Å—Ç/secure input: —á–µ—Ä–µ–∑ Accessibility (best-effort)

–í–∞–∂–Ω–æ:
- –ü–æ—Ç—Ä–µ–±—É—é—Ç—Å—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è (Input Monitoring / Accessibility). –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏
  —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π ‚Äî –º–æ–¥—É–ª—å –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –∏–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤—Ä—É—á–Ω—É—é.

### 2.3 Linux

- X11 (MVP): `x11rb` + XKB (—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ)
- Wayland (–ø–æ—Å–ª–µ MVP): –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä–æ–≤

–í–∞–∂–Ω–æ –ø—Ä–æ Wayland:
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ—Ö–≤–∞—Ç/–∏–Ω—ä–µ–∫—Ü–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –æ–±—ã—á–Ω–æ –∑–∞–ø—Ä–µ—â–µ–Ω—ã.
- –î–ª—è MVP —Ñ–∏–∫—Å–∏—Ä—É–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É Linux –∫–∞–∫:
  - X11: ‚úÖ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º
  - Wayland: ‚ö†Ô∏è best-effort / –ø–æ–∑–∂–µ / compositor-specific

---

## 3) –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (MVP)

### 3.1 –ü—Ä–∏–Ω—Ü–∏–ø—ã –º–æ–¥—É–ª—å–Ω–æ—Å—Ç–∏

- –ö–∞–∂–¥—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å (crate):
  - `layout_switcher`
  - `spell_checker`
- –ë—É–¥—É—â–∏–µ –º–æ–¥—É–ª–∏ (–ø–æ—Å–ª–µ MVP) –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫–∞–∫ –Ω–æ–≤—ã–µ crates, –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —è–¥—Ä–∞:
  - `clipboard_manager` (—É–º–Ω—ã–π –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞ "–∫–∞–∫ Clipdiary, –Ω–æ –ª—É—á—à–µ")
  - `voice_input` (—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ ‚Üí —Ç–µ–∫—Å—Ç)
  - `ai_assistant` (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –º–æ–¥–µ–ª—è–º–∏/–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏)
- –ú–æ–¥—É–ª–∏ –Ω–µ –∑–Ω–∞—é—Ç –¥—Ä—É–≥ –æ –¥—Ä—É–≥–µ.
- –Ø–¥—Ä–æ –∑–Ω–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–æ–¥—É–ª—è (trait) + —Å–æ–±—ã—Ç–∏—è.
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥—É–ª–µ–π ‚Äî —á–µ—Ä–µ–∑ `config.toml`.

–ö–ª—é—á–µ–≤–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ:
- –û—Ç–∫–ª—é—á–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–æ—Ç—Ä–µ–±–ª—è—Ç—å CPU/–ø–∞–º—è—Ç—å, –Ω–µ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è
  –∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏.

### 3.2 –ì—Ä–∞–Ω–∏—Ü—ã –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–æ–¥—É–ª–µ–π

–ü—Ä–∞–≤–∏–ª–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- –ó–∞–ø—Ä–µ—â–µ–Ω—ã –ø—Ä—è–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ "–º–æ–¥—É–ª—å ‚Üí –º–æ–¥—É–ª—å".
- –†–∞–∑—Ä–µ—à–µ–Ω–æ —Ç–æ–ª—å–∫–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —á–µ—Ä–µ–∑:
  - —Å–æ–±—ã—Ç–∏—è (event bus),
  - –∫–æ–º–∞–Ω–¥—ã –≤ —è–¥—Ä–æ (request/response),
  - –æ–±—â–∏–µ —Ç–∏–ø—ã –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º crate `shared_types` (–±–µ–∑ –ª–æ–≥–∏–∫–∏).

### 3.3 Capability-based –¥–æ—Å—Ç—É–ø (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å)

–ß—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å "–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ñ–ª–∞–π–Ω" –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥—É–ª–µ–π,
—è–¥—Ä–æ –≤—ã–¥–∞—ë—Ç –º–æ–¥—É–ª—è–º —Ç–æ–ª—å–∫–æ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (capabilities) –ø–æ –∫–æ–Ω—Ñ–∏–≥—É.

–ü—Ä–∏–º–µ—Ä—ã capabilities:
- `KeyboardHook` (—á—Ç–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã)
- `TextInjection` (–≤—Å—Ç–∞–≤–∫–∞/–∑–∞–º–µ–Ω–∞ —Ç–µ–∫—Å—Ç–∞)
- `ForegroundContext` (–∏–º—è –æ–∫–Ω–∞/–ø—Ä–æ—Ü–µ—Å—Å/—Ä–æ–ª—å –ø–æ–ª—è)
- `Network` (–¥–æ—Å—Ç—É–ø –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç)
- `Clipboard` (—á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å –±—É—Ñ–µ—Ä–∞)
- `Microphone` (–¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É)

–ü–æ–ª–∏—Ç–∏–∫–∞:
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `Network` –∑–∞–ø—Ä–µ—â—ë–Ω –≤—Å–µ–º.
- `spell_checker` –ø–æ–ª—É—á–∞–µ—Ç `Network` —Ç–æ–ª—å–∫–æ –ø—Ä–∏ `enabled = true`.
- –ë—É–¥—É—â–∏–µ `voice_input`/`ai_assistant` –ø–æ–ª—É—á–∞—é—Ç `Network`/`Microphone` —Ç–æ–ª—å–∫–æ
  –ø—Ä–∏ —è–≤–Ω–æ–º –≤–∫–ª—é—á–µ–Ω–∏–∏.

### 3.4 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è AI –∏ –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–µ–π (–ø–æ—Å–ª–µ MVP)

–ó–∞–∫–ª–∞–¥—ã–≤–∞–µ–º –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è AI-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤, —á—Ç–æ–±—ã –º–µ–Ω—è—Ç—å –º–æ–¥–µ–ª–∏/—Å–µ—Ä–≤–∏—Å—ã
–±–µ–∑ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è –º–æ–¥—É–ª–µ–π.

–ò–¥–µ—è:
- –í `ai_assistant` –≤–≤–æ–¥–∏—Ç—Å—è trait `AIClient` (–µ–¥–∏–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç)
- –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏: local/self-hosted/–æ–±–ª–∞—á–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
- –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏/–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ ‚Äî —á–µ—Ä–µ–∑ `config.toml`

–í–∞–∂–Ω–æ:
- –ü–æ–∫–∞ MVP –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç AI (—á—Ç–æ–±—ã –Ω–µ –Ω–∞—Ä—É—à–∞—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å/latency).
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ, –±–µ–∑ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ —è–¥—Ä–µ.

### 3.5 –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ workspace (Rust)

- `core` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥–∞, event bus, –¥–∏—Å–ø–µ—Ç—á–µ—Ä –º–æ–¥—É–ª–µ–π, shutdown
- `platform` ‚Äî –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –≤–≤–æ–¥–∞/–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ + —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ –û–°
- `modules/layout_switcher` ‚Äî –ª–æ–≥–∏–∫–∞ –∞–≤—Ç–æ/—Ä—É—á–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
- `modules/spell_checker` ‚Äî –ª–æ–≥–∏–∫–∞ "–ø–æ—Å–ª–µ Enter" + API –∫–ª–∏–µ–Ω—Ç + –∫—ç—à
- `modules/clipboard_manager` ‚Äî –ø–æ—Å–ª–µ MVP
- `modules/voice_input` ‚Äî –ø–æ—Å–ª–µ MVP
- `modules/ai_assistant` ‚Äî –ø–æ—Å–ª–µ MVP
- `shared_types` ‚Äî —Å–æ–±—ã—Ç–∏—è, –∫–æ–º–∞–Ω–¥—ã, –∫–æ–Ω—Ñ–∏–≥-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–±–µ–∑ –ª–æ–≥–∏–∫–∏)

---

## 4) –ê–ª–≥–æ—Ä–∏—Ç–º—ã MVP

### 4.1 –ê–≤—Ç–æ-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞—Å–∫–ª–∞–¥–∫–∏

–¶–µ–ª—å: –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —è–∑—ã–∫ –ø–æ 2‚Äì3 —Å–∏–º–≤–æ–ª–∞–º –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫.

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º:
- –î–µ—Ä–∂–∏–º –∫–æ—Ä–æ—Ç–∫–∏–π –±—É—Ñ–µ—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö N —Å–∏–º–≤–æ–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä 3‚Äì6)
- –î–µ—Ç–µ–∫—Ç–æ—Ä:
  - –µ—Å–ª–∏ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ "—Ç–∏–ø–∏—á–Ω—ã–µ –¥–ª—è EN –∫–ª–∞–≤–∏—à–∏" –∏ —Å—Ç—Ä–æ–∫–∞
    –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ —Ç—Ä–∞–Ω—Å–ª–∏—Ç –ø–æ —Ä–∞—Å–∫–ª–∞–¥–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä `ghbdtn`) ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º –≤ RU
  - –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
- –ù–∏–∫–∞–∫–∏—Ö —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ù–∏–∫–∞–∫–æ–π —Ç—è–∂—ë–ª–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ hook callback

### 4.2 –†—É—á–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ

- –ì–æ—Ä—è—á–∞—è –∫–ª–∞–≤–∏—à–∞: Alt+Shift (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- –î–µ–π—Å—Ç–≤–∏–µ: –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ä–∞—Å–∫–ª–∞–¥–∫—É (–±–µ–∑ –∞–≤—Ç–æ–ª–æ–≥–∏–∫–∏)

### 4.3 –û—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏—è (—Ç–æ–ª—å–∫–æ –ø–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—é –≤–≤–æ–¥–∞)

–¢—Ä–∏–≥–≥–µ—Ä—ã MVP:
- Enter (–æ—Å–Ω–æ–≤–Ω–æ–π)

–ü–æ–≤–µ–¥–µ–Ω–∏–µ:
- `spell_checker` –ø–æ–ª—É—á–∞–µ—Ç "–∫–æ–º–º–∏—Ç —Ç–µ–∫—Å—Ç–∞" (best-effort)
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ LanguageTool –ø—Ä–∏ –≤–∫–ª—é—á—ë–Ω–Ω–æ–º –º–æ–¥—É–ª–µ
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- –ê–≤—Ç–æ-–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —è–≤–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
  (MVP: –º–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å —Å —Ä–µ–∂–∏–º–∞ "—Ç–æ–ª—å–∫–æ –ø–æ–¥—Å–∫–∞–∑–∫–∞/–ª–æ–≥", –∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ/undo
  –¥–æ–±–∞–≤–∏—Ç—å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ, –µ—Å–ª–∏ —É—Å–ø–µ–≤–∞–µ–º)

–£—Ç–æ—á–Ω–µ–Ω–∏–µ (–≤–∞–∂–Ω–æ –¥–ª—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç–∏ MVP):
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π hook –Ω–µ "–∑–Ω–∞–µ—Ç" —Ç–µ–∫—Å—Ç –ø–æ–ª—è –≤–≤–æ–¥–∞ –Ω–∞–ø—Ä—è–º—É—é.
- –î–ª—è MVP "–∫–æ–º–º–∏—Ç —Ç–µ–∫—Å—Ç–∞" –º–æ–∂–Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å –∏–∑ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
  (–±—É—Ñ–µ—Ä –ø–µ—á–∞—Ç–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ + Backspace + Enter) –∏ —Å—á–∏—Ç–∞—Ç—å —ç—Ç–æ best-effort.
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è MVP: paste –∏–∑ –±—É—Ñ–µ—Ä–∞, IME/–∫–æ–º–ø–æ–∑–∏—Ü–∏—è, dead keys, –∞–≤—Ç–æ–∑–∞–º–µ–Ω—ã
  –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –º–æ–≥—É—Ç –Ω–µ –æ—Ç—Ä–∞–∂–∞—Ç—å—Å—è –≤ –±—É—Ñ–µ—Ä–µ.
- –í —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö (–ø–∞—Ä–æ–ª–∏/—Ç–µ—Ä–º–∏–Ω–∞–ª—ã/secure input) `spell_checker`
  –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç–∫–ª—é—á—ë–Ω (fail-closed), —á—Ç–æ–±—ã –Ω–µ –¥–æ–ø—É—Å—Ç–∏—Ç—å —É—Ç–µ—á–µ–∫.

–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –ö–ª—é—á: —Ö—ç—à —Ç–µ–∫—Å—Ç–∞ + —è–∑—ã–∫ + –≤–µ—Ä—Å–∏—è –ø—Ä–∞–≤–∏–ª
- TTL: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

---

## 5) –ë—É–¥—É—â–∏–µ –º–æ–¥—É–ª–∏ (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ –∑–∞–ª–æ–∂–∏—Ç—å, –Ω–æ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ MVP)

### 5.1 Clipboard Manager (–ø–æ—Å–ª–µ MVP)

**–°—É—Ç—å:** —É–º–Ω—ã–π –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞ —Å –∏—Å—Ç–æ—Ä–∏–µ–π, –ø–æ–∏—Å–∫–æ–º –∏ –ò–ò-–º–µ—Ç–∫–∞–º–∏.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**
- –û—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å `modules/clipboard_manager`
- Capability: `Clipboard` (—á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å) + –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ `Network` (–¥–ª—è sync –æ–±–ª–∞–∫–∞)
- –ú–æ–∂–µ—Ç —Å–ª—É—à–∞—Ç—å —Å–æ–±—ã—Ç–∏—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –±—É—Ñ–µ—Ä–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å (—Å —Å–æ–≥–ª–∞—Å–∏—è)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: –≤—ã–ø–ª—ã–≤–∞—é—â–∞—è –∏—Å—Ç–æ—Ä–∏—è (Ctrl+Shift+V –ø–æ–∑–∂–µ)
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö: LRU / –æ—á–µ—Ä–µ–¥—å —Å —Ç—ç–≥–∞–º–∏

**–ö–æ–≥–¥–∞:** –ø–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ MVP, –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ UI (Tauri)

### 5.2 Voice Input (–ø–æ—Å–ª–µ MVP)

**–°—É—Ç—å:** —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ ‚Üí —Ç–µ–∫—Å—Ç (Whisper.cpp –∏–ª–∏ –æ–±–ª–∞—á–Ω—ã–µ API).

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**
- –û—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å `modules/voice_input`
- Capability: `Microphone` + `Network` (–¥–ª—è –æ–±–ª–∞—á–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤)
- Event: "Voice detected" ‚Üí text injection
- –ú–æ–∂–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å layout_switcher (–∞–≤—Ç–æ–∑–∞–º–µ–Ω–∞ –ø–æ—Å–ª–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è)
- –•–æ—Ç-–∫–ª–∞–≤–∏—à–∞ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Shift+Ctrl+V)

**–ö–æ–≥–¥–∞:** –ø–æ—Å–ª–µ UI –∏ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Å–ø—Ä–æ—Å–∞

### 5.3 AI Assistant (–ø–æ—Å–ª–µ MVP)

**–°—É—Ç—å:** –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LLM –¥–ª—è –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è, –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏, –ò–ò-–ø–æ–¥—Å–∫–∞–∑–æ–∫.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**
- Trait `AIClient` (–µ–¥–∏–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤)
- –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
  - **Local:** Ollama, LM Studio, gpt4all, llama.cpp
  - **Self-hosted:** –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –Ω–∞ –º–∞—à–∏–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - **Cloud:** OpenAI, Anthropic, Google, Yandex, Claude, custom API endpoints
- –í—ã–±–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∏ –º–æ–¥–µ–ª–∏ ‚Üí —á–µ—Ä–µ–∑ `config.toml`
- Capability: `Network` + –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ `Microphone` (–¥–ª—è voice completion)

**–ö–ª—é—á–µ–≤–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –≤—ã–±–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è –º–æ–¥—É–ª–µ–π.

**–ö–æ–≥–¥–∞:** –ø–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ MVP –∏ eval –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö

### 5.4 System Tray & GUI (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π)

**–°—É—Ç—å:** —Å–∏—Å—Ç–µ–º–Ω—ã–π —Ç—Ä–µ–π-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è, —Å—Ç–∞—Ç—É—Å–∞, –±—ã—Å—Ç—Ä—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π.

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è:** **Tauri** (Rust + WebView, –ª—ë–≥–∫–∏–π, –±—ã—Å—Ç—Ä—ã–π, cross-platform).

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å (–∫–∞–∫–∞—è —Ä–∞—Å–∫–ª–∞–¥–∫–∞ —Å–µ–π—á–∞—Å, –∫–∞–∫–∏–µ –º–æ–¥—É–ª–∏ –∞–∫—Ç–∏–≤–Ω—ã)
- –ë—ã—Å—Ç—Ä—ã–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–æ–¥—É–ª–µ–π (toggle spell_checker, layout_switcher)
- –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–µ –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ —á–µ—Ä–µ–∑ UI
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ/–¥–µ–±–∞–≥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- –ü—Ä–æ—Å—Ç–æ–π –≤–∏–¥ –∏—Å—Ç–æ—Ä–∏–∏ –±—É—Ñ–µ—Ä–∞ (–∫–æ–≥–¥–∞ clipboard_manager –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è)

**–ö–æ–≥–¥–∞:** –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –≠—Ç–∞–ø–æ–º 4‚Äì5 (–µ—Å–ª–∏ –µ—Å—Ç—å —Ä–µ—Å—É—Ä—Å—ã)

---

## 6) –≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (MVP)

### –≠—Ç–∞–ø 0 ‚Äî –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (0.5‚Äì1 –¥–µ–Ω—å)

- –°–æ–∑–¥–∞—Ç—å Cargo workspace
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å `tracing` + –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–æ–≤
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å `serde` + `toml`
- –°–∫–µ–ª–µ—Ç –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã (trait Module + register)

**Definition of Done:**
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è (Ctrl+C)
- –ß–∏—Ç–∞–µ—Ç `config.toml` –∏ –≤–∫–ª—é—á–∞–µ—Ç/–≤—ã–∫–ª—é—á–∞–µ—Ç –º–æ–¥—É–ª–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (—É—Ä–æ–≤–µ–Ω—å info –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

### –≠—Ç–∞–ø 1 ‚Äî Windows hook + —Å–æ–±—ã—Ç–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (1‚Äì2 –¥–Ω—è)
SetWindowsHookExW)
- –ü—Ä–æ–±—Ä–æ—Å —Å–æ–±—ã—Ç–∏–π –≤ event bus (tokio::sync::broadcast)
- –ó–∞—â–∏—Ç–∏—Ç—å hot path (–º–∏–Ω–∏–º—É–º –∞–ª–ª–æ–∫–∞—Ü–∏–π, fast path –≤ callback)

**DoD:**
- –°—Ç–∞–±–∏–ª—å–Ω–æ –ª–æ–≤–∏—Ç –Ω–∞–∂–∞—Ç–∏—è –≤ —Ñ–æ–Ω–µ 1+ —á–∞—Å
- –ù–µ—Ç –ª–∞–≥–æ–≤ –ø—Ä–∏ –Ω–∞–±–æ—Ä–µ
- CPU < 1% –≤ idle

### –≠—Ç–∞–ø 2 ‚Äî –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö/–ø–∞—Ä–æ–ª—è—Ö (Windows) (1 –¥–µ–Ω—å)

- –î–µ—Ç–µ–∫—Ç–æ—Ä –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–∫–Ω–∞ + –ø—Ä–æ—Ü–µ—Å—Å (GetForegroundWindow, GetWindowTextW)
- –ë–ª–æ–∫-–ª–∏—Å—Ç —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤/–º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –ø–∞—Ä–æ–ª–µ–π
- –ö—ç—à –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ —Å–º–µ–Ω–µ —Ñ–æ–∫—É—Å–∞)
- –ü–æ–ª–∏—Ç–∏–∫–∞ fail-closed

**DoD:**
- –í —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö –∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞—Ö –ø–∞—Ä–æ–ª–µ–π layout_switcher –Ω–µ –¥–µ–π—Å—Ç–≤—É–µ—Ç
- spell_checker –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç –∏–∑ —ç—Ç–∏—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –≠—Ç–∞–ø 3 ‚Äî `layout_switcher` (–∞–≤—Ç–æ + Alt+Shift) (1‚Äì2 –¥–Ω—è)

- –ë—É—Ñ–µ—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ (3‚Äì6 chars)
- –î–µ—Ç–µ–∫—Ç–æ—Ä —è–∑—ã–∫–∞ –ø–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —ç–≤—Ä–∏—Å—Ç–∏–∫–µ
- –†—É—á–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ Alt+Shift (WinAPI SetKeyboardState –∏–ª–∏ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç)

**DoD:**
- –ê–≤—Ç–æ-–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ (‚â§ 1 –º—Å, —Å—É–±—ä–µ–∫—Ç–∏–≤–Ω–æ –±–µ–∑ –∑–∞–¥–µ—Ä–∂–∫–∏)
- Alt+Shift —Ä–∞–±–æ—Ç–∞–µ—Ç –≤—Å–µ–≥–¥–∞ (–∫—Ä–æ–º–µ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤)
- –õ–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ —Å–º–µ—à–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç)

### –≠—Ç–∞–ø 4 ‚Äî `spell_checker` (opt-in, –ø–æ Enter) (1‚Äì2 –¥–Ω—è)

- –ö–ª–∏–µ–Ω—Ç LanguageTool (reqwest + rustls –¥–ª—è HTTPS)
- In-memory LRU –∫—ç—à (lru crate)
- –¢—Ä–∏–≥–≥–µ—Ä "Enter" (–Ω–∞ –æ—Å–Ω–æ–≤–µ buffered —Å–∏–º–≤–æ–ª–æ–≤)
- Fail-closed: –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–∑ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤

**DoD:**
- –ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –º–æ–¥—É–ª—è (config.toml: spell_checker.enabled = true) ‚Äî –ø–æ—Å–ª–µ Enter —É—Ö–æ–¥–∏—Ç –∑–∞–ø—Ä–æ—Å –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –ø–æ–¥—Å–∫–∞–∑–∫–∏
- –ü—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–º –º–æ–¥—É–ª–µ ‚Üí –ù–£–õ–ï–í–ê–Ø —Å–µ—Ç–µ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–¥–∞–∂–µ –Ω–µ—Ç –ø–æ–ø—ã—Ç–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)
- –¢–µ–∫—Å—Ç –∏–∑ –ø–∞—Ä–æ–ª–µ–π/—Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤ –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –≠—Ç–∞–ø 5 ‚Äî –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–µ –∫–∞—Ä–∫–∞—Å—ã (2‚Äì4 –¥–Ω—è)

- **macOS:** –∑–∞–≥–ª—É—à–∫–∞ + —Å–±–æ—Ä–∫–∞ + –±–∞–∑–æ–≤—ã–π –ø–µ—Ä–µ—Ö–≤–∞—Ç (CGEventTap, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ Accessibility —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
  - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ secure input (for passwords)
- **Linux X11:** –∑–∞–≥–ª—É—à–∫–∞ + –±–∞–∑–æ–≤—ã–π –ø–µ—Ä–µ—Ö–≤–∞—Ç (x11rb + XKB, –µ—Å–ª–∏ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ)
  - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–∫–Ω–∞ —á–µ—Ä–µ–∑ X11
  - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞—Å–∫–ª–∞–¥–∫–∏ —á–µ—Ä–µ–∑ XKB
- **Wayland:** –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –Ω–µ –æ–±–µ—â–∞—Ç—å "–ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Ö–≤–∞—Ç" –≤ MVP

**DoD:**
- –ü—Ä–æ–µ–∫—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –Ω–∞ Windows/macOS/Linux (cargo build --release –±–µ–∑ –æ—à–∏–±–æ–∫)
- –ù–∞ macOS/Linux —Ö–æ—Ç—è –±—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∫ —Å–µ—Ä–≤–∏—Å –±–µ–∑ –ø–∞–¥–µ–Ω–∏—è
- README —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è (–¥–ª—è macOS: Accessibility)
- –ù–∞ macOS/Linux —Ö–æ—Ç—è –±—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∫ —Å–µ—Ä–≤–∏—Å/–¥–µ–º–æ–Ω –±–µ–∑ –ø–∞–¥–µ–Ω–∏—è

---

##‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ –∏ –Ω–µ –ø–∞–¥–∞–µ—Ç 24+ —á–∞—Å–∞
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞—Å–∫–ª–∞–¥–∫–∏ –æ—â—É—â–∞–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ (‚â§ 1 –º—Å, —Å—É–±—ä–µ–∫—Ç–∏–≤–Ω–æ)
- ‚úÖ –í –ø–æ–ª—è—Ö –ø–∞—Ä–æ–ª–µ–π –∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç —Ä–∞—Å–∫–ª–∞–¥–∫—É
- ‚úÖ –í –ø–æ–ª—è—Ö –ø–∞—Ä–æ–ª–µ–π/—Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç –≤ —Å–µ—Ç—å
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Alt+Shift –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ –ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ (Enter) –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏–∏ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞ –≤ config)
- ‚úÖ –õ—é–±–æ–π –º–æ–¥—É–ª—å –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `config.toml` –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –°–±–æ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç –Ω–∞ Windows, macOS, Linux (—Ö–æ—Ç—è –±—ã –±–∞–∑–æ–≤–æ)
- ‚úÖ –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ ‚â§ 20 –ú–ë –≤ idle
- ‚úÖ CPU < 1% –≤ idle

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ, –Ω–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ñ—É–Ω–∫—Ü–∏—è MVP):**

- ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –º–æ–¥—É–ª–∏ (clipboard/voice/AI) –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —è–¥—Ä–∞
- ‚úÖ –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–µ—Ç—å –≤—ã–∫–ª—é—á–µ–Ω–∞; –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å "—Å–ª—É—á–∞–π–Ω–æ"
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (—É—Ä–æ–≤–µ–Ω—å info –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, debug –≤–∫–ª—é—á–∞–µ—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥–æ–º)
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ (–æ—à–∏–±–∫–∏ ‚Üí log + graceful shutdown)

---

## 9) –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (config.toml)

–ü—Ä–∏–º–µ—Ä –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –µ—ë –∑–∞–≥—Ä—É–∂–∞–µ—Ç):

```toml
[logging]
level = "info"  # info, debug, trace
output = "console"  # console, file:/path/to/logfile

[layout_switcher]
enabled = true
hotkey = "alt+shift"  # –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å
auto_detect = true
detect_threshold = 3  # —Å–∫–æ–ª—å–∫–æ —Å–∏–º–≤–æ–ª–æ–≤ –Ω—É–∂–Ω–æ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–∞

# –ö–æ–Ω—Ç–µ–∫—Å—Ç—ã, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –ù–ï –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å (fail-closed)
[layout_switcher.forbidden_contexts]
# –ü—Ä–æ—Ü–µ—Å—Å—ã
blocked_processes = ["cmd", "powershell", "iterm2", "gnome-terminal"]
# –ù–∞–∑–≤–∞–Ω–∏—è –æ–∫–æ–Ω (regex/substring)
blocked_windows = ["- Password", "KeePass", "1Password", "Bitwarden"]
# –¢–∏–ø—ã –ø–æ–ª–µ–π (–µ—Å–ª–∏ –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è)
blocked_input_types = ["password", "search"]

[spell_checker]
enabled = false  # true —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–Ω–æ –≤–∫–ª—é—á–∏–ª
api = "languagetool"  # languagetool, yandex, –∏–ª–∏ –ø—É—Å—Ç–æ (offline only)
language = "ru"
cache_size = 1000  # LRU cache —Ä–∞–∑–º–µ—Ä

[spell_checker.api_config]
# LanguageTool Public API (–±–µ—Å–ø–ª–∞—Ç–Ω–∞—è, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ)
base_url = "https://api.languagetool.org"
# –ò–ª–∏ self-hosted: "http://localhost:8081"

[modules]
# –ú–æ–¥—É–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –≥—Ä—É–∑–∏—Ç—å –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
loaded = ["layout_switcher", "spell_checker"]
# –ú–æ–¥—É–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–∫–ª—é—á–µ–Ω—ã (–Ω–æ –∫–æ–¥ –µ—Å—Ç—å)
disabled = []

[server]
# –ï—Å–ª–∏ –ø–æ–∑–∂–µ –¥–æ–±–∞–≤–∏–º Tauri/HTTP API
port = 9999
```

**–ü—Ä–∞–≤–∏–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
- –í—Å–µ –º–æ–¥—É–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ "–≥–æ—Ç–æ–≤—ã, –Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω—ã"
- –°–µ—Ç—å (`spell_checker.enabled`) –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `false`
- –ü—Ä–∏ `spell_checker.enabled = false` ‚Üí –Ω–æ–ª—å –ø–æ–ø—ã—Ç–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API
- –ö–æ–Ω—Ñ–∏–≥ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ; –æ—à–∏–±–∫–∏ ‚Üí log + graceful shutdown

---

## 10) –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

- [ ] Rust stable —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, cargo —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°–æ–∑–¥–∞–Ω –ø—É—Å—Ç–æ–π Cargo workspace —Å –º–æ–¥—É–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- [ ] –ü–æ–¥–∫–ª—é—á–µ–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (tokio, tracing, serde, toml)
- [ ] –Ø–¥—Ä–æ (`core`) –≥—Ä—É–∑–∏—Ç –∫–æ–Ω—Ñ–∏–≥ –∏ –º–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å/–≤—ã–∫–ª—é—á–∞—Ç—å –º–æ–¥—É–ª–∏
- [ ] Windows hook —Å–∏—Å—Ç–µ–º–∞ (–∑–∞–≥–ª—É—à–∫–∞) –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ï—Å—Ç—å –ø—Ä–æ—Å—Ç–æ–π –º–µ—Ö–∞–Ω–∏–∑–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (tracing)
- [ ] CHANGELOG –æ–±–Ω–æ–≤–ª—ë–Ω —Å–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–∞–≤–∏–ª–∞–º

---

## –°–≤—è–∑–∞–Ω–æ

- [00üîµ-–°–¢–ê–†–¢ –ó–î–ï–°–¨ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.md](00üîµ-–°–¢–ê–†–¢%20–ó–î–ï–°–¨%20—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è%20—Å–∏—Å—Ç–µ–º–∞%20–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.md) ‚Äî –ø—Ä–∞–≤–∏–ª–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ —Ñ–∞–π–ª–æ–≤
- [README.md](../../README.md) ‚Äî –∫–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å (–ø–æ–∑–∂–µ)
- [CHANGELOG.md](../../CHANGELOG.md) ‚Äî –∏—Å—Ç–æ—Ä–∏—è –∫–æ–º–º–∏—Ç–æ–≤

