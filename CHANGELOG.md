# CHANGELOG

Формат: Keep a Changelog.
Версионирование: SemVer.

---

#️⃣ [0.1.14] 📅 2025-12-18 🕤 07:55

▶️ **Тема коммита:** 🧠 layout_switcher: ещё меньше ложных срабатываний

✅ Добавлено
- 🧠 Фильтр против CamelCase/смешанного регистра (часто код/идентификаторы)
- 🧠 Уточнённая эвристика RU→EN (по доле русских гласных)

✅ Изменено
- —

✅ Исправлено
- —

✅ Удалено
- —

#️⃣ [0.1.13] 📅 2025-12-18 🕤 07:45

▶️ **Тема коммита:** 🧠 layout_switcher: меньше ложных автокоррекций

✅ Добавлено
- 🧠 Консервативные фильтры автоисправления: не исправлять слишком короткие слова и акронимы

✅ Изменено
- —

✅ Исправлено
- —

✅ Удалено
- —

#️⃣ [0.1.12] 📅 2025-12-18 🕤 07:35

▶️ **Тема коммита:** 🧱 Подготовка к macOS/Linux без боли

✅ Добавлено
- 🧩 `smart_switcher_platform`: каркасные модули `macos`, `linux_x11`, `linux_wayland` (заглушки)
- 🧩 Feature-флаги `smart_switcher_platform`: `x11`, `wayland`

✅ Изменено
- 📖 Доки macOS/Linux: добавлен чеклист Platform API для прямого портирования

✅ Исправлено
- —

✅ Удалено
- —

#️⃣ [0.1.11] 📅 2025-12-18 🕤 07:25

▶️ **Тема коммита:** 🔤 spell_checker: меньше текста + LRU-кэш

✅ Добавлено
- 🔤 `spell_checker`: проверка только последних ~12 слов по Enter (меньше текста уходит в сеть)
- 🗃️ LRU-кэш результатов по `cache_size` для снижения повторных запросов

✅ Изменено
- —

✅ Исправлено
- —

✅ Удалено
- —

#️⃣ [0.1.10] 📅 2025-12-18 🕤 07:10

▶️ **Тема коммита:** 🔤 Этап 4: spell_checker (LanguageTool, opt-in, по Enter)

✅ Добавлено
- 🔤 `spell_checker`: запросы к LanguageTool API только по Enter (commit) при `enabled=true`
- 🛑 Fail-closed для `spell_checker`: в запрещённых контекстах сеть не используется
- 🧩 `smart_switcher_platform`: `is_forbidden_context(...)` для переиспользования политики

✅ Изменено
- ⚙️ `config.toml`: добавлен `spell_checker.forbidden_contexts`

✅ Исправлено
- —

✅ Удалено
- —

#️⃣ [0.1.9] 📅 2025-12-18 🕤 06:45

▶️ **Тема коммита:** ⚡ Оптимизация: кэш активного окна для forbidden_contexts (Windows)

✅ Добавлено
- 🪟 `smart_switcher_platform`: TTL-кэш активного окна (title/process) для снижения количества WinAPI вызовов

✅ Изменено
- 🛑 Проверки `forbidden_contexts` теперь переиспользуют кэш (меньше дергаем заголовок окна/процесс)

✅ Исправлено
- —

✅ Удалено
- —


---

#️⃣ [0.1.8] 📅 2025-12-18 🕤 06:35

▶️ **Тема коммита:** 🧠 Этап 1.3: авто-detect RU→EN + автокоррекция слова

✅ Добавлено
- 🧠 `layout_switcher`: авто-detect RU→EN по завершению слова (Space/Enter)
  при активной RU раскладке и похожести слова на английское

✅ Изменено
- 🛠️ Автокоррекция теперь поддерживает оба направления (EN→RU и RU→EN)

✅ Исправлено
- —

✅ Удалено
- —

#️⃣ [0.1.7] 📅 2025-12-18 🕤 06:25

▶️ **Тема коммита:** 🧠 Этап 1.2: авто-detect EN→RU + автокоррекция слова

✅ Добавлено
- 🧠 `layout_switcher`: авто-detect при `auto_detect=true` по завершению слова
  (Space/Enter), с порогом `detect_threshold`
- 🛠️ Автокоррекция EN→RU (например, `ghbdtn` → `привет`):
  - стирание слова через Backspace
  - вставка исправленного текста через `SendInput` (Unicode)
  - попытка переключить раскладку на RU для дальнейшего ввода

✅ Изменено
- 🪟 `smart_switcher_platform`: добавлены WinAPI утилиты для раскладки и ввода

✅ Исправлено
- —

✅ Удалено
- —


---

#️⃣ [0.1.6] 📅 2025-12-18 🕤 06:05

▶️ **Тема коммита:** ⌨️ Этап 1.1: Alt+Shift → переключение раскладки (Windows)

✅ Добавлено
- 🪟 WinAPI переключение раскладки на следующую:
  - определение активного окна/потока
  - отправка `WM_INPUTLANGCHANGEREQUEST`
- 🛑 Пропуск переключения в запрещённых контекстах по `forbidden_contexts`:
  - `blocked_processes` (best-effort)
  - `blocked_windows` (по заголовку окна)

✅ Изменено
- ⌨️ `layout_switcher`: детект hotkey `alt+shift` и вызов переключения

✅ Исправлено
- —

✅ Удалено
- —


---

#️⃣ [0.1.5] 📅 2025-12-18 🕤 05:35

▶️ **Тема коммита:** 🪟 Этап 1: Windows keyboard hook + события в EventBus

✅ Добавлено
- ⌨️ События клавиатуры в `smart_switcher_shared_types`:
  - `KeyboardEvent`
  - `AppEvent::Keyboard(KeyboardEvent)`
- 🪟 Windows low-level keyboard hook (WH_KEYBOARD_LL) в `smart_switcher_platform`
  с доставкой событий в приложение
- 🔌 Подключение хука в `app` и прокидка событий в `EventBus`

✅ Изменено
- 🧩 `layout_switcher` теперь получает события клавиатуры (пока логирует key-down)

✅ Исправлено
- —

✅ Удалено
- —


---

#️⃣ [0.1.4] 📅 2025-12-18 🕤 05:15

▶️ **Тема коммита:** 📚 Документация: troubleshooting Windows MSVC сборки

✅ Добавлено
- 📖 Добавлены инструкции по устранению ошибок сборки на Windows:
  - `LNK1104: msvcrt.lib` → проверка установки MSVC toolset
  - `LNK4272: x86/x64 конфликт` → переинициализация с `-arch=amd64`
  - Разделы в `doc/03-РАЗРАБОТКА Rust сборка тесты/01-ЛОКАЛЬНЫЙ ЗАПУСК И СБОРКА.md`

✅ Изменено
- —

✅ Исправлено
- —

✅ Удалено
- —


---

#️⃣ [0.1.3] 📅 2025-12-18 🕤 03:45

▶️ **Тема коммита:** 🦀 Этап 0: Cargo workspace + конфиг + каркас модулей

✅ Добавлено
- 🧰 Cargo workspace и crates:
  - `Cargo.toml` (workspace)
  - `app/` (bin)
  - `core/` (lib)
  - `platform/` (lib, заглушка)
  - `shared_types/` (lib: config/events)
  - `modules/layout_switcher/` (lib)
  - `modules/spell_checker/` (lib)
- ⚙️ Базовый `config.toml` в корне (spell_checker выключен по умолчанию)

✅ Изменено
- —

✅ Исправлено
- —

✅ Удалено
- —


---

#️⃣ [0.1.2] 📅 2025-12-18 🕤 03:25

▶️ **Тема коммита:** 📚 Документация: доп.шаблоны безопасность/модули/релизы/how-to

✅ Добавлено
- 🔐 Документы по безопасности и политике fail-closed:
  - `doc/06-БЕЗОПАСНОСТЬ приватность/01-ПРИВАТНОСТЬ И УГРОЗЫ.md`
  - `doc/06-БЕЗОПАСНОСТЬ приватность/02-FAIL-CLOSED ПОЛИТИКА.md`
- 🧩 Документы по модулям и capabilities:
  - `doc/07-ФУНКЦИОНАЛ модули/01-MODULE layout_switcher.md`
  - `doc/07-ФУНКЦИОНАЛ модули/02-MODULE spell_checker.md`
  - `doc/07-ФУНКЦИОНАЛ модули/03-CAPABILITIES.md`
- 🚀 Документ по релизам и версионированию:
  - `doc/08-РАЗВЕРТЫВАНИЕ релизы/01-РЕЛИЗЫ И ВЕРСИОНИРОВАНИЕ.md`
- 🧭 How-to гайды:
  - `doc/09-РУКОВОДСТВА how-to/01-HOWTO добавить модуль.md`
  - `doc/09-РУКОВОДСТВА how-to/02-HOWTO добавить платформенный бэкенд.md`
- 🗃️ Архив:
  - `doc/10-АРХИВ/README.md`

✅ Изменено
- —

✅ Исправлено
- —

✅ Удалено
- —


---

#️⃣ [0.1.1] 📅 2025-12-18 🕤 03:10

▶️ **Тема коммита:** 📚 Документация: каркас структуры + карта доков + заготовки разделов

✅ Добавлено
- 🗂️ Каркас папок документации (универсальная «десятка»):
  - `doc/01-ОБЩАЯ ИНФОРМАЦИЯ проект/`
  - `doc/02-СТРУКТУРА ПРОЕКТА workspace crates/`
  - `doc/03-РАЗРАБОТКА Rust сборка тесты/`
  - `doc/04-ПЛАТФОРМЫ Windows macOS Linux/`
  - `doc/05-ИНТЕГРАЦИИ API зависимости/`
  - `doc/06-БЕЗОПАСНОСТЬ приватность/`
  - `doc/07-ФУНКЦИОНАЛ модули/`
  - `doc/08-РАЗВЕРТЫВАНИЕ релизы/`
  - `doc/09-РУКОВОДСТВА how-to/`
  - `doc/10-АРХИВ/`
- 🗺️ Карта документации и ссылки:
  - `doc/01🔵-README.md`
- 🛣️ Высокоуровневый roadmap:
  - `doc/03🔵-ROADMAP.md`
- 🧱 Заготовки документов по разделам (видение, НФ-требования, архитектура, сборка/логи, платформы, интеграции)

✅ Изменено
- —

✅ Исправлено
- —

✅ Удалено
- —


---

#️⃣ [0.1.0] 📅 2025-12-18 🕤 02:30

▶️ **Тема коммита:** 📚 Документация: стартовая база + план MVP + чистка дублей

✅ Добавлено
- 📄 Базовые файлы проекта в корне: `README.md`, `.gitignore`, `CHANGELOG.md`
- 📘 Универсальная система документации:
  - `doc/00🔵-СТАРТ ЗДЕСЬ универсальная система документации.md`
- 🗺️ План разработки SmartSwitcher (MVP):
  - `doc/03🔵-ПЛАН РАЗРАБОТКИ smart-switcher mvp.md`

✅ Изменено
- 🧩 Уточнён техстек и правила приватности для MVP (opt-in сеть, fail-closed)

✅ Исправлено
- 🔗 Убраны ссылки на удалённые документы в разделе "Связано" плана MVP

✅ Удалено
- 🧹 Удалены дублирующие документы документации (оставлен единый источник правды)


---

#️⃣ [0.0.1] 📅 YYYY-MM-DD 🕤 HH:mm

▶️ **Тема коммита:** ...

✅ Добавлено
- —

✅ Изменено
- —

✅ Исправлено
- —

✅ Удалено
- —
